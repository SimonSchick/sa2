include("DSAFactionNewsFeed.lua")local PANEL = {}function PANEL:Init()	self._memberList = vgui.Create("DListView", self)	self._memberList:AddColumn("Name")	self._memberList:AddColumn("Rank")	self._memberList:AddColumn("Member since")		self._newsFeed = vgui.Create("DSAFactionNewsFeed", self)endlocal function buildRightClickMenu(line)	local menu = DermaMenu()	menu:AddOption(		"Show profile",		function()			SA.Plugins.Playerprofile:PopupPlayerProfile(line.__SAPID)		end	)	menu:AddOption(		"Send Message",		function()			SA.Plugins.Playermessage:PopupPlayerMessageox(line.__SAPID)		end	)	menu:Open()endfunction PANEL:UpdateMembers(tbl)	self._memberList:Clear()	local line	for plyID, plyData in next, tbl do		line = self._memberList:AddLine(			plyData.name,			"Dummy",--SA.Plugins.Factions:GetRankName(tbl.rank),			os.date("!%H:%M:%S - %d.%m.%y", plyData.memberSince--[[tbl.date]])		)		line.__SAPID = plyID		line.OnRightClick = buildRightClickMenu	endendfunction PANEL:PerformLayout(w, h)	self._memberList:StretchToParent(2, 2, w/2-1, 2)		self._newsFeed:StretchToParent(w/2+1, 2, 2, 2)endfunction PANEL:Paint()	return trueendfunction PANEL:Update()	self._faction = LocalPlayer():Team()	SA.Plugins.Factions:QueryMembers(		self._faction, 		function(tbl)			self:UpdateMembers(tbl)		end	)endvgui.Register("DSAFactionInformation", PANEL, "DPanel")